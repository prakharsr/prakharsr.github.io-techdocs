<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Ergo: A Tutorial · Accord Project</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Overview of Accord"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Ergo: A Tutorial · Accord Project"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.accordproject.org/index.html"/><meta property="og:description" content="## Overview of Accord"/><meta property="og:image" content="https://docs.accordproject.org/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.accordproject.org/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/ir-black.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/A-MARK-ACCORDPROJECT-ONELINE-white.svg" alt="Accord Project"/><h2 class="headerTitleWithLogo">Accord Project</h2></a><a href="/versions.html"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/next/accordproject.html" target="_self">Documentation</a></li><li class=""><a href="https://studio.accordproject.org" target="_self">Try Online!</a></li><li class=""><a href="https://github.com/accordproject" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Ergo: A Tutorial</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="overview-of-accord"></a><a href="#overview-of-accord" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview of Accord</h2>
<p>Cicero is an Open Source implementation of the Accord Project Template Specification. It defines the structure of natural language templates, bound to a data model, that can be executed using Ergo and request/response JSON messages. You can read the latest user documentation here: <a href="http://docs.accordproject.org">http://docs.accordproject.org</a>.</p>
<p>In short, with the Accord Project you can take a classic contract, e.g. Word document and use Cicero to define natural language contract and clause templates that can be executed by an event driven computer program (aka Smart contract). For the tutorial, Cicero will be used to define natural language contract and clause templates. These clause templates handle the syllogistic language of contracts.</p>
<p>For example,</p>
<pre><code class="hljs css language-md"> if the goods are more than [{DAYS}] late,
 then notify the supplier of the goods, with the message [{MESSAGE}].
</code></pre>
<p>DAYS and MESSAGE are variables</p>
<p>You can browse the library of Open Source Cicero contract and clause templates at: <a href="https://templates.accordproject.org">https://templates.accordproject.org</a>.</p>
<p>So how goes the contract get executed? That is where Ergo comes in Ergo is a strongly-typed functional programming language designed to capture the legal intent of legal contracts and clauses. We will use Ergo to create the contract logic consisting of a contract class with executable embedded clauses. Note: prior to the emergence of Ergo, the Cicero JavaScript component was primary to the execution of code.</p>
<p>Ergo obviates the Cicero JavaScript component for the execution phase with a new more comprehensive language which we explore in this tutorial.</p>
<h2><a class="anchor" aria-hidden="true" id="cicero"></a><a href="#cicero" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cicero</h2>
<p>The Open Source Cicero project defines the format of clause and contract templates based on to the Cicero Template Specification. The templates are the link between the natural language of contracts usually composed in a Word document and the specification of a machine executable transaction. Cicero templates define the API by specifying request and response elements for the logic associated with functional transaction executed by Ergo.</p>
<p>Cicero templates are composed of two elements:</p>
<ul>
<li>Template Grammar (the natural language text for the template),</li>
<li>Template Model (the data model that includes the variables contained within the template).</li>
<li>The Logic (the executable business logic for the template) will be handled by Ergo.</li>
</ul>
<p>When combined these three elements allow templates to be edited, analyzed, queried and executed.</p>
<h2><a class="anchor" aria-hidden="true" id="setup-ergo-development-environment"></a><a href="#setup-ergo-development-environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup Ergo Development environment</h2>
<p>Before you can build Ergo, you must install and configure the following dependencies on your machine:</p>
<h3><a class="anchor" aria-hidden="true" id="git"></a><a href="#git" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Git</h3>
<ul>
<li>Git: The [Github Guide to Installing Git][git-setup] is a good source of information.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="nodejs"></a><a href="#nodejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Node.js</h3>
<ul>
<li>Node.js (LTS): We use Node to generate the documentation, run a development web server, run tests, and generate distributable files. Depending on your system, you can install Node either from source or as a pre-packaged bundle.</li>
</ul>
<blockquote>
<p>Tip: Use nvm (or nvm-windows) to manage and install Node.js, This facilitates a version change of Node.js per project.</p>
</blockquote>
<ul>
<li>Lerna: This is a tool which helps when handling multiple npm packages in the Ergo repository. To install:
npm install -g lerna@^3.15.0</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="visual-studio-code"></a><a href="#visual-studio-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Visual Studio Code</h3>
<p>Visual Studio Code is a lightweight but powerful source code editor which runs on your desktop and is available for Windows, macOS and Linux. It comes with built-in support for JavaScript and Node.js and has a rich ecosystem of extensions for other languages (such Ergo).</p>
<p>Follow the platform specific guides below:
See, <a href="https://code.visualstudio.com/docs/setup/">https://code.visualstudio.com/docs/setup/</a></p>
<ul>
<li>macOS</li>
<li>Linux</li>
<li>Windows</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="install-ergo-visualstudio-plugin"></a><a href="#install-ergo-visualstudio-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install Ergo VisualStudio Plugin</h4>
<h3><a class="anchor" aria-hidden="true" id="validate-development-environment-and-toolset"></a><a href="#validate-development-environment-and-toolset" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Validate Development Environment and Toolset</h3>
<p>Clone <a href="https://github.com/accordproject/ergo">https://github.com/accordproject/ergo</a> to your local machine</p>
<h3><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h3>
<p>Install Ergo</p>
<p>The easiest way to install Ergo is as a Node.js package. Once you have Node.js installed on your machine, you can get the Ergo compiler and command-line using the Node.js package manager by typing the following in a terminal:
$ npm install -g @accordproject/ergo-cli@0.20</p>
<p>This will install the compiler itself (ergoc) and a command-line tool (ergo) to execute Ergo code. You can check that both have been installed and print the version number by typing the following in a terminal:</p>
<pre><code class="hljs css language-sh">$ ergoc --version
$ ergo --version
</code></pre>
<p>Then, to get command line help:</p>
<pre><code class="hljs">$ ergoc --help
$ ergo<span class="hljs-built_in"> execute </span>--help
</code></pre>
<p>Compiling your first contract</p>
<pre><code class="hljs css language-ergo"><span class="hljs-keyword">namespace</span> org.accordproject.volumediscount
 
<span class="hljs-keyword">contract</span> <span class="hljs-type">VolumeDiscount</span> <span class="hljs-keyword">over</span> <span class="hljs-type">VolumeDiscountContract</span> {
   <span class="hljs-comment">// Clause for volume discount</span>
   <span class="hljs-keyword">clause</span> volumediscount(request : <span class="hljs-type">VolumeDiscountRequest</span>) : <span class="hljs-type">VolumeDiscountResponse</span> {
        <span class="hljs-keyword">if</span> request.netAnnualChargeVolume &lt; <span class="hljs-keyword">contract</span>.firstVolume
        <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-type">VolumeDiscountResponse</span>{ discountRate: <span class="hljs-keyword">contract</span>.firstRate }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> request.netAnnualChargeVolume &lt; <span class="hljs-keyword">contract</span>.secondVolume
        <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-type">VolumeDiscountResponse</span>{ discountRate: <span class="hljs-keyword">contract</span>.secondRate }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-type">VolumeDiscountResponse</span>{ discountRate: <span class="hljs-keyword">contract</span>.thirdRate }
  }
}
</code></pre>
<p>To compile your first Ergo contract to JavaScript , within Visual Studio code</p>
<ul>
<li>Open the folder where you cloned <a href="https://github.com/accordproject/ergo">https://github.com/accordproject/ergo</a></li>
<li>Use View/Terminal to run the Ergo compiler:</li>
</ul>
<pre><code class="hljs css language-sh">$ ergoc ./examples/volumediscount/model.cto ./examples/volumediscount/logic.ergo
Compiling Ergo <span class="hljs-string">'./examples/volumediscount/logic.ergo'</span> -- creating <span class="hljs-string">'./examples/volumediscount/logic.js'</span>
</code></pre>
<p>By default, Ergo compiles to JavaScript for execution. This may change in the future to support other languages. The compiled code for the result in stored as <code>./examples/volumediscount/logic.js</code></p>
<h3><a class="anchor" aria-hidden="true" id="execute-a-contract"></a><a href="#execute-a-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Execute a contract</h3>
<p>To execute a contract, we pass the necessary parameters including the CTO, Ergo files, the name of a contract and the json files containing request and contract state
ergorun [ctos] [ergos] --contractname [file] --contract [file] --state [file] --request [file]</p>
<p>So for example we use ergorun with :</p>
<pre><code class="hljs css language-sh">$ ergorun ./examples/volumediscount/model.cto ./examples/volumediscount/logic.ergo
--contractname org.accordproject.volumediscount.VolumeDiscount
--contract ./examples/volumediscount/contract.json
--request ./examples/volumediscount/request.json
--state ./examples/volumediscount/state.json
</code></pre>
<p>Here contract.json contains the following values</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"$class"</span>: <span class="hljs-string">"org.accordproject.volumediscount.VolumeDiscountContract"</span>,
  <span class="hljs-attr">"parties"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"contractId"</span>: <span class="hljs-string">"cr1"</span>,
  <span class="hljs-attr">"firstVolume"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">"secondVolume"</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">"firstRate"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"secondRate"</span>: <span class="hljs-number">2.9</span>,
  <span class="hljs-attr">"thirdRate"</span>: <span class="hljs-number">2.8</span>
}
</code></pre>
<p>Request.json contains</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"$class"</span>: <span class="hljs-string">"org.accordproject.volumediscount.VolumeDiscountRequest"</span>,
  <span class="hljs-attr">"netAnnualChargeVolume"</span>: <span class="hljs-number">10.4</span>
}
</code></pre>
<p>logic.ergo contains:</p>
<pre><code class="hljs css language-ergo"><span class="hljs-keyword">namespace</span> org.accordproject.volumediscount
 
<span class="hljs-keyword">contract</span> <span class="hljs-type">VolumeDiscount</span> <span class="hljs-keyword">over</span> <span class="hljs-type">VolumeDiscountContract</span> {
  <span class="hljs-comment">// Clause for volume discount</span>
  <span class="hljs-keyword">clause</span> volumediscount(request : <span class="hljs-type">VolumeDiscountRequest</span>) : <span class="hljs-type">VolumeDiscountResponse</span> {
    <span class="hljs-keyword">if</span> request.netAnnualChargeVolume &lt; <span class="hljs-keyword">contract</span>.firstVolume
    <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-type">VolumeDiscountResponse</span>{ discountRate: <span class="hljs-keyword">contract</span>.firstRate }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> request.netAnnualChargeVolume &lt; <span class="hljs-keyword">contract</span>.secondVolume
    <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-type">VolumeDiscountResponse</span>{ discountRate: <span class="hljs-keyword">contract</span>.secondRate }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-type">VolumeDiscountResponse</span>{ discountRate: <span class="hljs-keyword">contract</span>.thirdRate }
  }
}
</code></pre>
<p>Here netAnnualCharge Volume equals 10.4 which is not less than firstVolume and secondVolume which are equal to 1 and 10 respectively so the logic for the volumediscount clause returns thirdRate which equals 2.8</p>
<pre><code class="hljs">7:31:58 PM - info:<span class="hljs-built_in"> Logging </span>initialized. 2018-09-27T23:31:58.623Z
7:31:59 PM - info: {<span class="hljs-string">"response"</span>:{<span class="hljs-string">"discountRate"</span>:2.8,<span class="hljs-string">"<span class="hljs-variable">$class</span>"</span>:<span class="hljs-string">"org.accordproject.volumediscount.VolumeDiscountResponse"</span>},<span class="hljs-string">"state"</span>:{<span class="hljs-string">"<span class="hljs-variable">$class</span>"</span>:<span class="hljs-string">"org.accordproject.cicero.contract.AccordContractState"</span>,<span class="hljs-string">"stateId"</span>:<span class="hljs-string">"1"</span>},<span class="hljs-string">"emit"</span>:[]}
</code></pre>
<p>PS D:\Users\jbambara\Github\ergo&gt;</p>
<h2><a class="anchor" aria-hidden="true" id="ergo-development"></a><a href="#ergo-development" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ergo Development</h2>
<p>Create Template
Start with basic agreement in natural language and locate the variables
Here in the example see the bold
Volume-Based Card Acceptance Agreement [Abbreviated]
This Agreement is by and between ………..you agree to be bound by the Agreement.
Discount means an amount that we charge you for accepting the Card, which amount is:
(i) a percentage (Discount Rate) of the face amount of the Charge that you submit, or a flat per-
Transaction fee, or a combination of both; and/or
(ii) a Monthly Flat Fee (if you meet our requirements).</p>
<p>Transaction Processing and Payments. ………………… less all applicable deductions, rejections, and withholdings, which include:
………………………….</p>
<p>SETTLEMENT
a) Settlement Amount. Our agent will pay you according to your payment plan, ……………………..which include:
(i) the Discount,
…………………………………………..
b) Discount. The Discount is determined according to the following table:</p>
<p>| Annual Dollar Volume      | Discount                 |
| Less than $1 million          | 3.00%                    |
| $1 million to $10 million | 2.90%                    |
| Greater than $10 million  | 2.80%                |
Identify the request variables and contract instance variables
Codify the variables with $[{request}] or [{contract instance}]
| Annual Dollar Volume          | Discount                 |
| Less than $[{firstVolume}] million      | [{firstRate}]%                    |
| $[{firstVolume}] million to $[{secondVolume}] million | [{secondRate}]%                    |
| Greater than $[{secondVolume}] million  | [{thirdRate}]%                    |</p>
<p>Create Model
Define the model asset which contains the contract instance variables and the transaction request and response. Defines the data model for the VolumeDiscount template. This defines the structure that the parser for the template generates from input source text. See model.cto below:
namespace org.accordproject.volumediscount
import org.accordproject.cicero.contract.* from <a href="https://models.accordproject.org/cicero/contract.cto">https://models.accordproject.org/cicero/contract.cto</a>
import org.accordproject.cicero.runtime.* from <a href="https://models.accordproject.org/cicero/runtime.cto">https://models.accordproject.org/cicero/runtime.cto</a>
asset VolumeDiscountContract extends AccordContract {
o Double firstVolume
o Double secondVolume
o Double firstRate
o Double secondRate
o Double thirdRate
}
transaction VolumeDiscountRequest {
o Double netAnnualChargeVolume
}
transaction VolumeDiscountResponse {
o Double discountRate
}</p>
<p>Create Logic
The contract logic is accomplished by coding ERGO statements and expressions to consume the request and use contract instance variables to produce the desired response. In our example, request.netAnnualChargeVolume is tested against contract rates to produce the result.
namespace org.accordproject.volumediscount</p>
<p>define the contract
contract VolumeDiscount over VolumeDiscountContract {</p>
<p>define the contract clause and request : response</p>
<p>clause volumediscount(request : VolumeDiscountRequest) : VolumeDiscountResponse {</p>
<p>define the logic ; here we use if /then /else statement to test request parameter against contract instance variable
and return</p>
<pre><code class="hljs">    if request.netAnnualChargeVolume &lt; contract.firstVolume
    then return VolumeDiscountResponse{ discountRate: contract.firstRate }
    else if request.netAnnualChargeVolume &lt; contract.secondVolume
    then return VolumeDiscountResponse{ discountRate: contract.secondRate }
    else return VolumeDiscountResponse{ discountRate: contract.thirdRate }
</code></pre>
<p>}</p>
<p>Ergo Language
As you have seen in this tutorial, Ergo is a domain-specific language (DSL) that captures the execution logic of legal contracts. In this simple example, you see that Ergo aims to have contracts and clauses as first-class elements of the language. To accommodate the maturation of distributed ledger implementations, Ergo will be blockchain neutral, i.e., the same contract logic can be executed either on and off chain on distributed ledger technologies like HyperLedger Fabric. Most importantly, Ergo is consistent with the Accord Protocol Template Specification. Follow the links below to learn more about
Introduction to Ergo
Ergo Language Guide
Ergo Reference Guide</p>
<p>October 12, 2018</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview-of-accord">Overview of Accord</a></li><li><a href="#cicero">Cicero</a></li><li><a href="#setup-ergo-development-environment">Setup Ergo Development environment</a><ul class="toc-headings"><li><a href="#git">Git</a></li><li><a href="#nodejs">Node.js</a></li><li><a href="#visual-studio-code">Visual Studio Code</a></li><li><a href="#validate-development-environment-and-toolset">Validate Development Environment and Toolset</a></li><li><a href="#getting-started">Getting started</a></li><li><a href="#execute-a-contract">Execute a contract</a></li></ul></li><li><a href="#ergo-development">Ergo Development</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.accordproject.org/" class="nav-home"><figure class="site-footer-logo"><svg viewBox="0 0 220 35"><g transform="translate(46.830409, 11.323529)"><path d="M64.8,4.6c0-2.3-1.9-4.1-4.1-4.1h-5.5v12.1h2.1V8.7h3.2l1.8,3.8h2.4l-2-4.3C64,7.5,64.8,6.1,64.8,4.6zM60.7,6.5h-3.4V2.7h3.4c1.1,0,1.9,0.8,1.9,1.9C62.6,5.6,61.8,6.5,60.7,6.5z"></path><path d="M92.4,0.4h-5.5v12.1H89V8.7h3.4c2.3,0,4.1-1.9,4.1-4.1l0,0C96.5,2.3,94.6,0.4,92.4,0.4z M92.4,6.5H89V2.7h3.4c1.1,0,1.9,0.8,1.9,1.9C94.3,5.6,93.4,6.5,92.4,6.5z"></path><path d="M18.7,10.6c-2.2,0-3.9-1.8-3.9-4.1s1.7-4.1,3.9-4.1c1.3,0,2.5,0.6,3.2,1.6l1.5-1.4c-1.2-1.5-2.9-2.3-4.7-2.3c-3.4,0-6.1,2.8-6.1,6.3s2.8,6.3,6.1,6.3c2,0,3.9-1,5.1-2.8l-1.6-1.3C21.4,9.9,20.1,10.6,18.7,10.6z"></path><path d="M6.9,0.4H3.8L0.1,12.5h2.2l0.5-1.7h5.1l0.5,1.7h2.2L6.9,0.4z M3.4,8.8l1.9-6.2l1.9,6.2H3.4z"></path><polygon points="172.7,0.4 163.3,0.4 163.3,2.6 166.9,2.6 166.9,12.5 166.9,12.5 169,12.5 169,12.5 169,2.6 172.7,2.6"></polygon><path d="M72.4,0.4h-4l0,0l0,0v12.1l0,0h4c3.3,0,6-2.7,6-6S75.8,0.4,72.4,0.4z M76.3,6.5c0,2.1-1.7,3.8-3.8,3.8h-2V2.7h2C74.6,2.7,76.3,4.3,76.3,6.5L76.3,6.5z"></path><path d="M135.4,0.4L135.4,0.4H128v2.2h5.3v4.9c0,1.7-0.8,3.1-3,3.1c-2,0-3.2-1.6-3.2-1.6l-1.5,1.4c0,0,1.6,2.3,4.6,2.3c3.1,0,5.2-2.1,5.2-5V7.5l0,0l0,0L135.4,0.4L135.4,0.4z"></path><path d="M32.2,10.6c-2.2,0-3.9-1.8-3.9-4.1s1.7-4.1,3.9-4.1c1.3,0,2.5,0.6,3.2,1.6L37,2.5c-1.2-1.5-2.9-2.3-4.7-2.3c-3.4,0-6.1,2.8-6.1,6.3s2.8,6.3,6.1,6.3c2,0,3.9-1,5.1-2.8l-1.6-1.3C34.9,9.9,33.7,10.6,32.2,10.6z"></path><path d="M45.8,0.2c-3.4,0-6.1,2.8-6.1,6.3s2.7,6.3,6.1,6.3s6.1-2.8,6.1-6.3S49.2,0.2,45.8,0.2z M45.8,10.6c-2.2,0-3.9-1.9-3.9-4.1s1.7-4.1,3.9-4.1s3.9,1.9,3.9,4.1S48,10.6,45.8,10.6z"></path><path d="M117.8,0.2c-3.4,0-6.1,2.8-6.1,6.3s2.7,6.3,6.1,6.3s6.1-2.8,6.1-6.3S121.1,0.2,117.8,0.2z M117.8,10.6c-2.2,0-3.9-1.9-3.9-4.1s1.7-4.1,3.9-4.1c2.2,0,3.9,1.9,3.9,4.1S119.9,10.6,117.8,10.6z"></path><path d="M109,4.6c0-2.3-1.9-4.1-4.1-4.1h-5.5v12.1h2.1V8.7h3.2l1.8,3.8h2.4l-2-4.3C108.2,7.5,109,6.1,109,4.6z M104.9,6.5h-3.4V2.7h3.4c1.1,0,1.9,0.8,1.9,1.9C106.8,5.6,105.9,6.5,104.9,6.5z"></path><polygon points="147.6,2.6 147.6,0.4 139.1,0.4 139.1,12.5 147.6,12.5 147.6,10.4 141.2,10.4 141.2,7.6 145.9,7.6 145.9,5.4 141.2,5.4 141.2,2.6 	"></polygon><path d="M156.3,10.6c-2.2,0-3.9-1.8-3.9-4.1s1.7-4.1,3.9-4.1c1.3,0,2.5,0.6,3.2,1.6l1.5-1.4c-1.2-1.5-2.9-2.3-4.7-2.3c-3.4,0-6.1,2.8-6.1,6.3s2.8,6.3,6.1,6.3c2,0,3.9-1,5.1-2.8l-1.6-1.3C159,9.9,157.7,10.6,156.3,10.6z"></path></g><path d="M22.7,35h12.4L23.8,0H11.5l3,9.3h-6L0.1,35h12.4l5-16h0.1L22.7,35z M22.1,2.3l9.8,30.3h-7.5L14.6,2.3H22.1z M16.8,16.6h-4.6l-1.6-5h4.6L16.8,16.6z M10.7,32.7H3.3l5.9-18l1.4,4.3h4.5L10.7,32.7z"></path></svg></figure></a><div><h5>Docs</h5><ul><li><a href="/docs/accordproject.html">Overview</a></li><li><a href="/docs/started-installation.html">Getting Started</a></li><li><a href="/docs/markup-cicero.html">Template Guides</a></li></ul></div><div><h5>Community</h5><ul><li><a href="/users.html">User Showcase </a></li><li><a href="http://stackoverflow.com/questions/tagged/cicero" target="_blank" rel="noreferrer noopener"> Stack Overflow</a></li><li><a href="https://accord-project-slack-signup.herokuapp.com">Slack</a></li><li><a href="https://twitter.com/accordhq" target="_blank" rel="noreferrer noopener">Twitter</a></li></ul></div><div><h5>More</h5><ul><li><a href="https://medium.com/@accordhq">Blog</a></li><li><a href="https://vimeo.com/accordproject">Vimeo</a></li><li><a href="https://github.com/accordproject">GitHub</a></li><li><a class="github-button" href="https://github.com/accordproject/cicero" data-icon="octicon-star" data-count-href="/accordproject/cicero/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub"> Star </a></li></ul></div></section><div class="col-container align-end"><div class="col col-twothird"><div class="linux-foundation-logo"><a href="https://www.linuxfoundation.org/projects/"><img src="/img/LF-logo.png" alt="The Linux Foundation Projects"/></a></div><p class="copyright disclaimer">The Accord Project is not a standards setting body or organization. Documentation should be interpreted accordingly.</p><p class="copyright disclaimer">The materials on this site are for informational purposes only and do not constitute legal advice. The Accord Project is not a law firm or a substitute for an attorney or law firm. The Accord Project cannot provide any kind of advice, explanation, opinion, or recommendation about possible legal rights, remedies, defenses, options, selection of forms, or strategies. The information provided is not intended to create, and receipt or use of it does not constitute, a lawyer-client relationship. Users should not act upon this information without seeking professional counsel.</p></div><div class="col"><p class="copyright">Copyright © 2018-2020 Accord Project, LLC.</p></div></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '1679802ddfc315329d6b5f4616b30e51',
                indexName: 'accordproject_api',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>